{% extends "base.html" %}

{% block content %}
<div class="container mx-auto py-8">
    <!-- Book Title at the Top -->
    <h1 class="text-3xl font-bold text-center mb-6">{{ book.title }}</h1>

    <div class="flex flex-col md:flex-row gap-8">
        
        <!-- Left Column: Book Cover -->
        <div class="md:w-1/4 flex flex-col items-center">
            <!-- Book Cover -->
            <img src="{{ book.cover.url }}" alt="{{ book.title }}" class="w-48 h-64 object-cover rounded-md mb-4">

            <!-- Book Details Below Cover -->
            <div class="text-center mt-4">
                <!-- Author with Link to Author Detail -->
                <p class="text-lg font-semibold">By: 
                    <a href="{% url 'author_details' book.author.id %}" class="text-blue-500 hover:underline">
                        {{ book.author.full_name }}
                    </a>
                </p>

                <!-- Price -->
                <p class="text-gray-600 mt-2">Price: ${{ book.price }}</p>

                <!-- ISBN -->
            <p class="text-gray-600 mt-1">ISBN: {{ book.formatted_isbn }}</p>

                <!-- Icons: Add to Basket, Add to Favorites (visible only if authenticated) -->
                {% if user.is_authenticated %}
                    <div class="flex justify-center mt-4 space-x-4">
                        <button class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
                            Add to Basket
                        </button>
                        <button class="px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600">
                            Add to Favorites
                        </button>
                    </div>
                {% endif %}

                <!-- Edit Book Button (visible only for staff members) -->
                {% if user.is_staff %}
                    <a href="{% url 'edit_book' book.id %}" class="mt-4 inline-block px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                        Edit Book
                    </a>
                {% endif %}
            </div>
        </div>

        <!-- Right Column: Book Description -->
        <div class="md:w-3/4">
            <h2 class="text-xl font-semibold mb-2">Description</h2>
            <p class="text-gray-700">{{ book.description }}</p>
        </div>
    </div>

{#    <!-- Reviews Section -->#}
{#    <div class="mt-8">#}
{#        <h2 class="text-2xl font-semibold mb-4">Reviews</h2>#}
{#        #}
{#        <!-- Display All Reviews for the Book -->#}
{#        {% for review in book.reviews.all %}#}
{#            <div class="bg-gray-100 p-4 rounded-lg mb-4">#}
{#                <p class="text-gray-800 font-semibold">{{ review.user.username }}</p>#}
{#                <p class="text-gray-600">{{ review.content }}</p>#}
{#                <p class="text-gray-500 text-sm mt-2">{{ review.created_at }}</p>#}
{#            </div>#}
{#        {% empty %}#}
{#            <p class="text-gray-500">No reviews yet. Be the first to review this book!</p>#}
{#        {% endfor %}#}
{#    </div>#}
{##}
{#    <!-- Add Review Section (Visible Only to Authenticated Users) -->#}
{#    {% if user.is_authenticated %}#}
{#        <div class="mt-8 bg-white p-4 rounded-lg shadow-md">#}
{#            <h2 class="text-xl font-semibold mb-4">Add a Review</h2>#}
{#            <form method="post" action="{% url 'add_review' book.id %}">#}
{#                {% csrf_token %}#}
{#                <textarea name="content" rows="4" class="w-full p-2 border border-gray-300 rounded-md" placeholder="Write your review..."></textarea>#}
{#                <button type="submit" class="mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">#}
{#                    Submit Review#}
{#                </button>#}
{#            </form>#}
{#        </div>#}
{#    {% endif %}#}
</div>
{% endblock %}
